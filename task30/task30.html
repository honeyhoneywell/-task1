<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        div{
            margin-top: 20px;
        }
        label{
            display: inline-block;
            font-size: 14px;
            color: #626262;
            height: 30px;
            width: 80px;
            text-align: right;
            vertical-align: middle;
            line-height: 30px;
        }
        input[type='text']{
            width: 320px;
            height: 30px;
            margin-left: 30px;
            border: 1px solid #cccccc;
            -webkit-border-radius: 4px;
            -moz-border-radius: 4px;
            border-radius: 4px;
            outline: none;
        }
        input[type='text']:hover{
            -webkit-box-shadow: 0 0 0 1px #4d97ff;
            -moz-box-shadow: 0 0 0 1px #4d97ff;
            box-shadow: 0 0 0 1px #4d97ff;
        }
        input[type='button']{
            border: none;
            height: 30px;
            width: 80px;
            margin-left: 352px;
            -webkit-border-radius:4px;
            -moz-border-radius:4px;
            border-radius:4px;
            outline: none;
            background: #6a7ba1;
            color: #ffffff;
        }
        input[type='button']:hover{
            background: #4c72a1;
        }
        input[type='button']:active{
            background: #3367a1;
        }
        span{
            margin-left: 120px;
            font-size: 12px;
            color: #8d8d8d;
            visibility: hidden;
        }
    </style>
</head>
<body>
<form action="">
    <div><label for="username">名称</label><input id="username" type="text"></div>
    <span>必填,长度为4-16个字符</span>
    <div><label for="secret1">密码</label><input id="secret1" type="text"></div>
    <span>必填,长度为4-16个字符</span>
    <div><label for="secret2">确认密码</label><input id="secret2" type="text"></div>
    <span>再次输入相同的密码</span>
    <div><label for="email">邮箱</label><input id="email" type="text"></div>
    <span>请输入正确的邮箱</span>
    <div><label for="phone">手机</label><input id="phone" type="text"></div>
    <span>请输入11位手机号码</span><br>
    <input type="button" value="提交">
</form>
<script>
    var oForm = document.getElementsByTagName('form')[0],
        spans = document.getElementsByTagName('span'),
        inputs = document.getElementsByTagName('input');
    var re = {
        ch:/([\u4e00-\u9fa5])/g,
        secret:/^\w{4,16}$/,
        mail:/^\w+@[a-z0-9]+(\.[a-z]+){1,3}$/,
        phone:/^1[34578]\d{9}$/
    };
    for(var i= 0,len = spans.length;i<len;i++){
        inputs[i].index = i;
        inputs[i].onclick = function () {
            spans[this.index].style.visibility = 'visible';
        }
    }
    inputs[4].onblur = function () {
        var str = this.value;
        var that = this;
        if(judge(str,re.phone)){
            render(that,0);
        }else{
            render(that,1);
        }
    };
    inputs[3].onblur = function () {
        var str = this.value;
        var that = this;
        if(judge(str,re.mail)){
            render(that,0);
        }else{
            render(that,1);
        }
    };
    inputs[0].onblur = function () {
        var str = this.value;
        var that = this;
        if(judge(str,re.ch,0)){
            render(that,0);
        }else{
            render(that,1);
        }
    };
    function render(that,i) {
        if(i===0){
            spans[that.index].innerHTML = '格式正确';
            spans[that.index].style.color = '#55C72C';
            that.style.border = '1px solid #55C72C';
        }else {
            spans[that.index].innerHTML = '格式错误';
            spans[that.index].style.color = '#C4390D';
            that.style.border = '1px solid #C4390D';
        }
    }
    function judge(str,re,index) {
        var string = str.trim();
        if(index === 0){
            string = string.replace(re,function ($0) {
                return $0+$0;
            });
            if(string.length>3&&string.length<17){
                return true;
            }else {
                return false;
            }
        }else if(index === 1){      //密码一次
            if(!string){
                return 0;           //空
            }else if(re.test(string) && (string.length<4 || string.length>16)) {
                return 1;           //长度不够
            }else if(re.test(string)){
                return 2;           //合格
            }
        }else if(index === 2){

        }else{
            return re.test(string);
        }
    }
</script>
</body>
</html>